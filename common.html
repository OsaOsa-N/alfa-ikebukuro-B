<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <!-- Add this to <head> -->

    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />

    <!-- Load polyfills to support older browsers -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"
        crossorigin="anonymous"></script>

    <!-- Load Vue followed by BootstrapVue -->
    <script src="https://unpkg.com/vue@latest/dist/vue.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

    <!-- Load the following for BootstrapVueIcons support -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <script src="https://kit.fontawesome.com/0ba569bf5f.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css">
    <title>リアル脱出ゲーム|共通画面</title>
</head>

<body>
    <div id="main">
        <div class="header">
            <div @click="toggle('item','map')">
                <span class="material-icons-outlined">task</span>
                <p>流れ図</p>
            </div>
            <div @click="toggle('item','hint')">
                <span class="material-icons-outlined">help_outline</span>
                <p>ヒント</p>
            </div>
        </div>
        <div v-if="stage['item']['map']" class="item">
            <div>
                <span class="material-icons-outlined clear" @click="close('item','map')">clear</span>
                レシピを決める→材料を集める→生産ラインで調理
                <br>
                パスワード「ひらけごま」
            </div>
        </div>
        <div v-if="stage['item']['hint']" class="item">
            <div>
                <span class="material-icons-outlined clear" @click="close('item','hint')">clear</span>
                ひんと
            </div>
        </div>

        <div v-if="stage[0]['flag']" class="stage">
            <div>
                <div class="h1">工場にアクセスするぞ！</div>
                <p>まずはそれぞれのグループの画面で資料にアクセスしよう</p>
                <p>パスワードは工場の流れ図に記されているぞ！</p>
            </div>
            <a @click="toggle('0','mail')" v-if="!stage[0]['mail']">資料を表示できたら</a>
            <div v-if="stage[0]['mail']" class="mt-5">
                <p>それぞれの画面に映し出される言葉を組み合わせたあいことばを入れよう</p>
                <input type="text" v-model="stage[0]['input']">
                <p v-if="stage[0]['failed']">ちがうよー</p>
                <a @click="auth(0)">アクセス！</a>
            </div>
            <div v-if="stage[0]['success']" class="success">
                <div class="h2">ステージクリア！</div>
                <p>デザート工場にアクセスしたぞ！</p>
                <p>ここからは流れ図を確認しながらデザート工場を直していく</p>
                <a @click="goNext(0)">次のステージへ</a>
            </div>
        </div>

        <div v-if="stage[1]['flag']" class="stage">
            <div class="h1">ステージ1</div>
            <p>レシピを取り戻すためになぞを解いてパスワードを導き出そう！</p>
            <p>クロスワードには文字を入れられるぞ！</p>
            <div class="crossword">
                <table>
                    <tr>
                        <td><span>1</span><input type="text" maxlength="1"></td>
                        <td><span>2</span><input type="text" maxlength="1"></td>
                        <td style="background-color: rgb(238,204,205);;"><span>3</span><input type="text" maxlength="1">
                        </td>
                        <td class="bg-black"></td>
                        <td style="background-color: rgb(220,232,213);"><span>4</span><input type="text" maxlength="1">
                        </td>
                        <td><input type="text" maxlength="1"></td>
                    </tr>
                    <tr>
                        <td><span>5</span><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td style="background-color: rgb(220,232,213);"><span>6</span><input type="text" maxlength="1">
                        </td>
                        <td><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                    </tr>
                    <tr>
                        <td class="bg-black"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                        <td style="background-color: rgb(211,225,241);"><span>7</span><input type="text" maxlength="1">
                        </td>
                        <td><input type="text" maxlength="1"></td>
                        <td><span>8</span><input type="text" maxlength="1"></td>
                    </tr>
                    <tr>
                        <td><span>9</span><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                        <td><span>10</span><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                        <td style="background-color: rgb(253,242,208);"><span>11</span><input type="text" maxlength="1">
                        </td>
                        <td><input type="text" maxlength="1"></td>
                    </tr>
                    <tr>
                        <td><span>12</span><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><span>13</span><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                        <td><input type="text" maxlength="1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" maxlength="1"></td>
                        <td class="bg-black"></td>
                        <td style="background-color: rgb(220,232,213);"><span>14</span><input type="text" maxlength="1">
                        </td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                    </tr>
                </table>
                <div>
                    <div style="background-color: rgb(220,232,213);"><input type="text" maxlength="1"></div>
                    <p style="font-size: 70px;">”</p>
                    <div style="width: 50px; height: 50px; background-color: rgb(253,242,208);"><input type="text"
                            maxlength="1" style="font-size: 30px;"></div>
                    <div style="background-color: rgb(211,225,241);"><input type="text" maxlength="1"></div>
                    <div style="background-color: rgb(238,204,205);"><input type="text" maxlength="1"></div>
                </div>
            </div>
            <input type="text" v-model="stage[1]['input']">
            <p v-if="stage[1]['failed']">ちがうよー</p>
            <a @click="auth(1)">アクセス！</a>
            <div v-if="stage[1]['success']" class="success">
                <div class="h2">ステージクリア！</div>
                <p>パスワードを入力し、レシピにアクセスした！</p>
                <p>ゼリーをつくるぜ！！</p>
                <a @click="goNext(1)">次の問題へ</a>
            </div>
        </div>

        <div v-if="stage[2]['flag']" class="stage">
            <div class="h1">ステージ2</div>
            <p>レシピを入手したから次は材料だ！</p>
            <p>れいぞうこあけるでー</p>
            <input type="text" v-model="stage[2]['input']">
            <p v-if="stage[2]['failed']">ちがうよー</p>
            <a @click="auth(2)">アクセス！</a>
            <div v-if="stage[2]['success']" class="success">
                <div class="h2">ステージクリア！</div>
                <p>れいぞうこを開け、ゼリーの材料を入手した！</p>
                <p>ここに3匹の材料があるじゃろ？</p>
                <div class="d-flex justify-content-around">
                    <div>ぶどう</div>
                    <div>りんご</div>
                    <div>おれんじ</div>
                </div>
                <a @click="goNext(2)">次の問題へ</a>
            </div>
        </div>

        <div v-if="stage[3]['flag']" class="stage">
            <div class="h1">ステージ3</div>
            <p>生産ラインが乗っ取られているぞ！</p>
            <p>あいことばを入力して復旧しよう！</p>
            <p>まちがいーさがーしのーまちがいーのほーうにー</p>
            <div class="crossword stage3">
                <table>
                    <tr>
                        <td style="background-color: rgb(238,204,205);"><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1" value="ご" readonly></td>
                    </tr>
                    <tr>
                        <td><input type="text" maxlength="1" value="ひ" readonly></td>
                        <td style="background-color: rgb(220,232,213);"><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1" value="き" readonly></td>
                        <td><input type="text" maxlength="1" value="き" readonly></td>
                    </tr>
                    <tr>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1" value="ー" readonly></td>
                        <td><input type="text" maxlength="1" value="ラ" readonly></td>
                        <td><input style="background-color: rgb(253,242,208);" type="text" maxlength="1"></td>
                    </tr>
                    <tr>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1" value="イ" readonly></td>
                        <td><input type="text" maxlength="1" value="ト" readonly></td>
                        <td><input type="text" maxlength="1"></td>
                        <td style="background-color: rgb(211,225,241);"><input type="text" maxlength="1"></td>
                        <td><input type="text" maxlength="1" value="ド" readonly></td>
                    </tr>
                </table>
                <div>
                    <div style="background-color: rgb(238,204,205);"><input type="text" maxlength="1"></div>
                    <div style="background-color: rgb(253,242,208);"><input type="text" maxlength="1"></div>
                    <div style="background-color: rgb(220,232,213);"><input type="text" maxlength="1"></div>
                    <div style="background-color: rgb(211,225,241);"><input type="text" maxlength="1"></div>
                </div>
            </div>
            <div>
                <input type="text" v-model="stage[3]['input']">
                <p v-if="stage[3]['failed']">ちがうよー</p>
                <a @click="auth(3)">アクセス！</a>
                <div v-if="stage[3]['success']" class="success">
                    <p>正解！</p>
                    <a @click="goNext(3)">次の問題へ</a>
                </div>
            </div>
        </div>

        <div v-if="stage[4]['flag']" class="stage">
            <div class="h1">ステージ4</div>
            <p>これでゼリーがつくれる...!と思ったが</p>
            <p>なんか動かない！何故！？！？！？！？？！？！？！？？？</p>
            <p>...なんかメールがきたぞ！</p>
            <a @click="toggle(4,'mail')" v-if="!stage[4]['mail']">メールをひらく</a>
            <div v-if="stage[4]['mail']">
                ふぉっふぉっふぉ<br>
                わしの正体を当ててみよ〜<br>
                <img src="img/stage4-common.png" class="w-75">
                <br>
                <input type="text" v-model="stage[4]['input']">
                <p v-if="stage[4]['failed']">ちがうよー</p>
                <a @click="auth(4)">アクセス！</a>
                <div v-if="stage[4]['success']" class="success">
                    <p>なんと！犯人は校長だったのだ！！！びっくり！！</p>
                    <a @click="goNext(4)">次へ</a>
                </div>
            </div>

        </div>

        <div v-if="stage[5]['flag']" class="stage">
            クリア！
            おつかれ〜
        </div>
    </div>
    <script>
        Vue.config.devtools = true;

        new Vue({
            el: '#main',
            data: {
                stage: {
                    item: {
                        map: false,
                        hint: false,
                    },
                    0: {
                        //てんぷら↓↓
                        flag: true,
                        input: "",
                        answer: "きゅうしょく",
                        failed: false,
                        success: false,

                        //開けたりしたいやつ↓↓
                        mail: false,
                    },
                    1: {
                        flag: false,
                        input: "",
                        answer: "がっこう",
                        failed: false,
                        success: false,
                    },
                    2: {
                        flag: false,
                        input: "",
                        answer: "おとな",
                        failed: false,
                        success: false,
                    },
                    3: {
                        flag: false,
                        input: "",
                        answer: "りーだー",
                        failed: false,
                        success: false,
                    },
                    4: {
                        flag: false,
                        input: "",
                        answer: "こうちょう",
                        failed: false,
                        success: false,

                        mail: false,
                    },
                    5: {
                        flag: false,
                        input: "",
                        answer: "",
                        failed: false,
                        success: false,
                    },
                }
            },
            methods: {
                toggle(index, data) {
                    this.stage[index][data] = !this.stage[index][data];
                },
                close(index, data) {
                    this.stage[index][data] = false;
                },
                auth(index) {
                    if (this.stage[index]['input'] == this.stage[index]['answer']) {
                        this.stage[index]['success'] = true;
                        this.stage[index]['failed'] = false;
                    } else {
                        this.stage[index]['failed'] = true;
                    }
                },
                goNext(index) {
                    this.stage[index]['flag'] = false;
                    this.stage[index + 1]['flag'] = true;
                }
            }
        })
    </script>
</body>

</html>
